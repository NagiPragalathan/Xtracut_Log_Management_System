{% extends 'base.html' %}

{% block content %}
 
 <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6">
        <div class="bg-white rounded-md border border-gray-100 p-6 shadow-md shadow-black/5">
            <div class="flex justify-between mb-6">
                <div>
                    <div class="flex items-center mb-1">
                        <div class="text-2xl font-semibold">2</div>
                    </div>
                    <div class="text-sm font-medium text-gray-400">Users</div>
                </div>
                 <div class="dropdown">
                    <button type="button" class="dropdown-toggle text-gray-400 hover:text-gray-600"><i class="ri-more-fill"></i></button>
                    <ul class="dropdown-menu shadow-md shadow-black/5 z-30 hidden py-1.5 rounded-md bg-white border border-gray-100 w-full max-w-[140px]">
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Profile</a>
                        </li>
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Settings</a>
                        </li>
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Logout</a>
                        </li>
                    </ul>
                </div> 
            </div>

            <a href="/gebruikers" class="text-[#f84525] font-medium text-sm hover:text-red-800">View</a>
        </div>
        <div class="bg-white rounded-md border border-gray-100 p-6 shadow-md shadow-black/5">
            <div class="flex justify-between mb-4">
                <div>
                    <div class="flex items-center mb-1">
                        <div class="text-2xl font-semibold">100</div>
                        <div class="p-1 rounded bg-emerald-500/10 text-emerald-500 text-[12px] font-semibold leading-none ml-2">+30%</div>
                    </div>
                    <div class="text-sm font-medium text-gray-400">Companies</div>
                </div>
                 <div class="dropdown">
                    <button type="button" class="dropdown-toggle text-gray-400 hover:text-gray-600"><i class="ri-more-fill"></i></button>
                    <ul class="dropdown-menu shadow-md shadow-black/5 z-30 hidden py-1.5 rounded-md bg-white border border-gray-100 w-full max-w-[140px]">
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Profile</a>
                        </li>
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Settings</a>
                        </li>
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Logout</a>
                        </li>
                    </ul>
                </div> 
            </div>
            <a href="/dierenartsen" class="text-[#f84525] font-medium text-sm hover:text-red-800">View</a>
        </div>
        <div class="bg-white rounded-md border border-gray-100 p-6 shadow-md shadow-black/5">
            <div class="flex justify-between mb-6">
                <div>
                    <div class="text-2xl font-semibold mb-1">100</div>
                    <div class="text-sm font-medium text-gray-400">Blogs</div>
                </div>
                 <div class="dropdown">
                    <button type="button" class="dropdown-toggle text-gray-400 hover:text-gray-600"><i class="ri-more-fill"></i></button>
                    <ul class="dropdown-menu shadow-md shadow-black/5 z-30 hidden py-1.5 rounded-md bg-white border border-gray-100 w-full max-w-[140px]">
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Profile</a>
                        </li>
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Settings</a>
                        </li>
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Logout</a>
                        </li>
                    </ul>
                </div> 
            </div>
            <a href="" class="text-[#f84525] font-medium text-sm hover:text-red-800">View</a>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
        <div class="bg-white border border-gray-100 shadow-md shadow-black/5 p-6 rounded-md lg:col-span-2">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4">
                <div class="rounded-md border border-dashed border-gray-200 p-4">
                    <div class="flex items-center mb-0.5">
                        <div class="text-xl font-semibold">10</div>
                        <span class="p-1 rounded text-[12px] font-semibold bg-blue-500/10 text-blue-500 leading-none ml-1">$80</span>
                    </div>
                    <span class="text-gray-400 text-sm">Active</span>
                </div>
                <div class="rounded-md border border-dashed border-gray-200 p-4">
                    <div class="flex items-center mb-0.5">
                        <div class="text-xl font-semibold">50</div>
                        <span class="p-1 rounded text-[12px] font-semibold bg-emerald-500/10 text-emerald-500 leading-none ml-1">+$469</span>
                    </div>
                    <span class="text-gray-400 text-sm">Completed</span>
                </div>
                <div class="rounded-md border border-dashed border-gray-200 p-4">
                    <div class="flex items-center mb-0.5">
                        <div class="text-xl font-semibold">4</div>
                        <span class="p-1 rounded text-[12px] font-semibold bg-rose-500/10 text-rose-500 leading-none ml-1">-$130</span>
                    </div>
                    <span class="text-gray-400 text-sm">Canceled</span>
                </div>
            </div>
            <div>
                {% comment %} <canvas id="order-chart"></canvas> {% endcomment %}
                <canvas id="log-chart"></canvas>
            </div>
        </div>
        <div class="bg-white border border-gray-100 shadow-md shadow-black/5 p-6 rounded-md">
            <div class="flex justify-between mb-4 items-start">
                <div class="font-medium">Email Address</div>
                <div class="dropdown">
                    <button type="button" class="dropdown-toggle text-gray-400 hover:text-gray-600"><i class="ri-more-fill"></i></button>
                    <ul class="dropdown-menu shadow-md shadow-black/5 z-30 hidden py-1.5 rounded-md bg-white border border-gray-100 w-full max-w-[140px]">
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Profile</a>
                        </li>
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Settings</a>
                        </li>
                        <li>
                            <a href="#" class="flex items-center text-[13px] py-1.5 px-4 text-gray-600 hover:text-blue-500 hover:bg-gray-50">Logout</a>
                        </li>
                    </ul>
                </div>
            </div>
            <table class="min-w-full table-fixed border-collapse">
                <tbody class="h-full">
                    {% for email in unique_emails %}
                    <tr class="bg-white hover:bg-green-100">
                        <td class="px-4 py-2 border border-green-200">{{ email }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td class="text-center py-4 text-gray-500">No email addresses found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
                   
        </div>
    </div>
    <div class="container mx-auto mt-10 p-8 bg-white rounded-lg shadow-lg">
        <h1 class="text-3xl font-bold text-center text-blue-600 mb-8">Log Entries</h1>

        <!-- Form to filter logs by time, plugin, status code, function, and mailid -->
        <form method="GET" action="" class="mb-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            
            <!-- Time Filter -->
            <div>
                <label for="time_filter" class="block text-gray-700 font-medium mb-2">Filter by time:</label>
                <select name="time_filter" id="time_filter" onchange="this.form.submit()" class="w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="" {% if not time_filter %}selected{% endif %}>All</option>
                    <option value="30_minutes" {% if time_filter == '30_minutes' %}selected{% endif %}>30 minutes ago</option>
                    <option value="1_hour" {% if time_filter == '1_hour' %}selected{% endif %}>1 hour ago</option>
                    <option value="1_week" {% if time_filter == '1_week' %}selected{% endif %}>1 week ago</option>
                    <option value="1_month" {% if time_filter == '1_month' %}selected{% endif %}>1 month ago</option>
                </select>
            </div>

            <!-- Plugin Filter -->
            <div>
                <label for="plugin_filter" class="block text-gray-700 font-medium mb-2">Filter by plugin:</label>
                <select name="plugin_filter" id="plugin_filter" onchange="this.form.submit()" class="w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="all" {% if not plugin_filter or plugin_filter == 'all' %}selected{% endif %}>All</option>
                    <option value="sample" {% if plugin_filter == 'sample' %}selected{% endif %}>Sample</option>
                    <option value="sample_one" {% if plugin_filter == 'sample_one' %}selected{% endif %}>Sample One</option>
                </select>
            </div>

            <!-- Status Code Filter -->
            <div>
                <label for="status_code_filter" class="block text-gray-700 font-medium mb-2">Filter by status code:</label>
                <select name="status_code_filter" id="status_code_filter" onchange="this.form.submit()" class="w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="all" {% if not status_code_filter or status_code_filter == 'all' %}selected{% endif %}>All</option>
                    <option value="201" {% if status_code_filter == '201' %}selected{% endif %}>201</option>
                    <option value="500" {% if status_code_filter == '500' %}selected{% endif %}>500</option>
                </select>
            </div>

            <!-- Function Filter -->
            <div>
                <label for="function_filter" class="block text-gray-700 font-medium mb-2">Filter by function:</label>
                <select name="function_filter" id="function_filter" onchange="this.form.submit()" class="w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="all" {% if not function_filter or function_filter == 'all' %}selected{% endif %}>All</option>
                    <option value="sample" {% if function_filter == 'sample' %}selected{% endif %}>Sample</option>
                    <option value="samplefn" {% if function_filter == 'samplefn' %}selected{% endif %}>Sample Function</option>
                </select>
            </div>

            <!-- User Mail Filter -->
            <div class="col-span-1 md:col-span-2 lg:col-span-3">
                <label for="user_mailid_filter" class="block text-gray-700 font-medium mb-2">Filter by user mail ID:</label>
                <input type="text" name="user_mailid_filter" id="user_mailid_filter" value="{{ user_mailid_filter }}" placeholder="Enter mail ID" class="w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            </div>

            <div class="col-span-1 md:col-span-2 lg:col-span-3 text-center">
                <button type="submit" class="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors duration-300">Filter</button>
            </div>
        </form>

        <!-- Table to display logs -->
        <div class="overflow-x-auto">
            <table class="min-w-full table-auto border-collapse border border-gray-300 shadow-lg">
                <thead>
                    <tr class="bg-blue-500 text-white">
                        <th class="px-6 py-3 border text-left">Log Message</th>
                        <th class="px-6 py-3 border text-left">Status Code</th>
                        <th class="px-6 py-3 border text-left">User Email</th>
                        <th class="px-6 py-3 border text-left">Plugin</th>
                        <th class="px-6 py-3 border text-left">Function</th>
                        <th class="px-6 py-3 border text-left">Date & Time</th>
                    </tr>
                </thead>
                <tbody>
                    {% for log in logs %}
                    <tr class="bg-white hover:bg-gray-100">
                        <td class="px-6 py-3 border">{{ log.log_msg }}</td>
                        <td class="px-6 py-3 border">{{ log.StatusCode }}</td>
                        <td class="px-6 py-3 border">{{ log.user_mailid }}</td>
                        <td class="px-6 py-3 border">{{ log.Plugin }}</td>
                        <td class="px-6 py-3 border">{{ log.function }}</td>
                        <td class="px-6 py-3 border">{{ log.dateTime }}</td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="6" class="text-center py-4 text-gray-500">No logs found for the selected filters.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

   
</div>


{%  endblock %}
